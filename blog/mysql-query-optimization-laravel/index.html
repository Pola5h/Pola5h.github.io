<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MySQL Query Optimization in Laravel: Advanced Techniques</title>
    <meta name="description" content="Master database performance in Laravel. Learn how to fix N+1 queries, use eager loading, add indexes, and implement query caching — from real production experience.">
    <meta name="author" content="Kamruzzaman Polash">
    <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large">
    <link rel="canonical" href="https://pola5h.github.io/blog/mysql-query-optimization-laravel/">

    <meta property="og:type" content="article">
    <meta property="og:title" content="MySQL Query Optimization in Laravel: Advanced Techniques">
    <meta property="og:description" content="Master database performance in Laravel. Fix N+1 queries, add indexes, and implement caching — from real production experience.">
    <meta property="og:image" content="https://pola5h.github.io/og-image.svg">
    <meta property="og:url" content="https://pola5h.github.io/blog/mysql-query-optimization-laravel/">
    <meta property="og:site_name" content="Kamruzzaman Polash">
    <meta property="og:locale" content="en_US">
    <meta property="article:author" content="https://pola5h.github.io/">
    <meta property="article:published_time" content="2024-11-15">
    <meta property="article:modified_time" content="2025-02-20">
    <meta property="article:section" content="Technology">
    <meta property="article:tag" content="MySQL">
    <meta property="article:tag" content="Laravel">
    <meta property="article:tag" content="Performance">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="MySQL Query Optimization in Laravel: Advanced Techniques">
    <meta name="twitter:description" content="Master database performance in Laravel — N+1 fixes, indexing, and caching from real production experience.">
    <meta name="twitter:image" content="https://pola5h.github.io/twitter-image.svg">

    <link rel="apple-touch-icon" sizes="180x180" href="/favicon.svg">
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <meta name="theme-color" content="#0d1117">
    <meta name="msapplication-TileColor" content="#0d1117">

    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "TechArticle",
        "headline": "MySQL Query Optimization in Laravel: Advanced Techniques",
        "description": "Master database performance in Laravel with advanced optimization techniques including N+1 fixes, eager loading, indexing, and caching.",
        "image": "https://pola5h.github.io/og-image.svg",
        "author": { "@type": "Person", "name": "Kamruzzaman Polash", "url": "https://pola5h.github.io/" },
        "publisher": { "@type": "Person", "name": "Kamruzzaman Polash", "url": "https://pola5h.github.io/" },
        "datePublished": "2024-11-15",
        "dateModified": "2025-02-20",
        "mainEntityOfPage": "https://pola5h.github.io/blog/mysql-query-optimization-laravel/",
        "articleSection": "Technology",
        "keywords": ["MySQL optimization", "Laravel performance", "N+1 queries", "database indexing", "query caching"],
        "inLanguage": "en-US",
        "wordCount": "2500",
        "timeRequired": "PT12M",
        "breadcrumb": {
            "@type": "BreadcrumbList",
            "itemListElement": [
                { "@type": "ListItem", "position": 1, "name": "Home", "item": "https://pola5h.github.io/" },
                { "@type": "ListItem", "position": 2, "name": "Blog", "item": "https://pola5h.github.io/blog/" },
                { "@type": "ListItem", "position": 3, "name": "MySQL Query Optimization", "item": "https://pola5h.github.io/blog/mysql-query-optimization-laravel/" }
            ]
        }
    }
    </script>

    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; line-height: 1.7; color: #333; background: #fff; }
        .container { max-width: 800px; margin: 0 auto; padding: 2rem; }
        .breadcrumb { color: #6c757d; margin-bottom: 2rem; font-size: 0.9rem; }
        .breadcrumb a { color: #007bff; text-decoration: none; }
        .article-header { margin-bottom: 2.5rem; padding-bottom: 2rem; border-bottom: 1px solid #e9ecef; }
        .article-category { color: #28a745; font-size: 0.85rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 0.8rem; }
        h1 { font-size: 2.4rem; line-height: 1.2; margin-bottom: 1rem; color: #2c3e50; }
        .article-meta { color: #6c757d; font-size: 0.9rem; }
        .article-meta a { color: #007bff; text-decoration: none; }
        .article-content { font-size: 1.05rem; line-height: 1.8; }
        .article-content h2 { font-size: 1.7rem; margin: 2.5rem 0 1rem; color: #2c3e50; }
        .article-content h3 { font-size: 1.3rem; margin: 2rem 0 0.8rem; color: #34495e; }
        .article-content p { margin-bottom: 1.5rem; }
        .code-block { background: #f8f9fa; border: 1px solid #e9ecef; border-radius: 8px; padding: 1.5rem; margin: 2rem 0; font-family: 'Courier New', monospace; font-size: 0.88rem; overflow-x: auto; white-space: pre; }
        .highlight { background: #fff3cd; padding: 1rem 1.2rem; border-left: 4px solid #ffc107; margin: 2rem 0; border-radius: 0 4px 4px 0; }
        .author-bio { background: #f8f9fa; border-radius: 8px; padding: 2rem; margin: 3rem 0; text-align: center; }
        .author-bio p { margin-bottom: 1rem; color: #6c757d; }
        .author-links { display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap; margin-top: 1rem; }
        .author-links a { color: #007bff; text-decoration: none; padding: 0.5rem 1rem; border: 1px solid #007bff; border-radius: 4px; transition: all 0.2s; }
        .author-links a:hover { background: #007bff; color: #fff; }
        @media (max-width: 600px) { .container { padding: 1rem; } h1 { font-size: 1.8rem; } }
    </style>
</head>
<body>
    <div class="container">
        <nav class="breadcrumb">
            <a href="/">Home</a> / <a href="/blog/">Blog</a> / MySQL Query Optimization in Laravel
        </nav>
        <article>
            <header class="article-header">
                <div class="article-category">PHP Performance</div>
                <h1>MySQL Query Optimization in Laravel: Advanced Techniques</h1>
                <div class="article-meta">By <a href="/">Kamruzzaman Polash</a> · November 15, 2024 · Updated February 2025 · 12 min read</div>
            </header>
            <div class="article-content">
                <p>Database performance is one of the biggest factors in Laravel application speed. Slow queries drain server resources and frustrate users. In this guide I'll share the optimisation techniques I've used in production — including fixing N+1 bugs in a real payroll system that reduced query counts by over 80%.</p>

                <h2>The N+1 Query Problem</h2>
                <p>The most common performance killer in Laravel. It happens when you load a collection and then trigger a new query for each item inside a loop:</p>
                <div class="code-block">// BAD: N+1 — 1 query for users + 1 per user for profile
$users = User::all();
foreach ($users as $user) {
    echo $user->profile->bio;
}

// GOOD: 2 queries total regardless of user count
$users = User::with('profile')->get();
foreach ($users as $user) {
    echo $user->profile->bio;
}</div>

                <h2>Query Optimisation Techniques</h2>

                <h3>1. Select Only What You Need</h3>
                <div class="code-block">// Loads all columns — wasteful
$users = User::all();

// Loads only what the view actually uses
$users = User::select('id', 'name', 'email')->get();</div>

                <h3>2. Add Database Indexes</h3>
                <p>Indexes are the single highest-impact optimisation for read-heavy queries. Add them to any column you filter or sort by frequently:</p>
                <div class="code-block">// In your migration
Schema::table('users', function (Blueprint $table) {
    $table->index('email');
    $table->index(['status', 'created_at']); // Composite index
});</div>

                <h3>3. Cache Expensive Queries</h3>
                <div class="code-block">$popularPosts = Cache::remember('popular_posts', 3600, function () {
    return Post::where('views', '>', 1000)
               ->orderBy('views', 'desc')
               ->take(10)
               ->get();
});</div>

                <h2>Handling Large Datasets</h2>

                <h3>Chunk Large Collections</h3>
                <div class="code-block">// Processes 1000 records at a time — avoids memory exhaustion
User::chunk(1000, function ($users) {
    foreach ($users as $user) {
        // Process each user
    }
});</div>

                <h3>Use Lazy Collections</h3>
                <div class="code-block">// Streams records one at a time — lowest memory footprint
User::lazy()->each(function ($user) {
    // Process without loading all records into memory
});</div>

                <h2>Monitoring Query Performance</h2>
                <p>Use Laravel Telescope in development or enable query logging to find slow queries:</p>
                <div class="code-block">DB::enableQueryLog();

// ... run your code ...

$queries = DB::getQueryLog();
dd($queries); // Shows every query, its bindings, and execution time</div>

                <div class="highlight">
                    <strong>Pro tip:</strong> Always test with realistic data volumes. A query that runs fine against 500 rows in development can take 30 seconds against 500,000 rows in production. Use database seeders to generate realistic test data.
                </div>

                <h2>Conclusion</h2>
                <p>Start with N+1 fixes and eager loading — these are the lowest-effort, highest-impact changes. Then add indexes to frequently queried columns and introduce caching for expensive reads. Profile before and after each change so you know what's actually making a difference.</p>
            </div>
        </article>

        <div class="author-bio">
            <h3>About the Author</h3>
            <p><strong>Kamruzzaman Polash</strong> — Software Engineer specialising in Laravel, REST APIs, and scalable backend systems. 10+ projects delivered for clients worldwide.</p>
            <div class="author-links">
                <a href="/">Portfolio</a>
                <a href="mailto:kzaman3055@gmail.com">Contact</a>
                <a href="https://github.com/pola5h" target="_blank" rel="noopener noreferrer">GitHub</a>
                <a href="https://linkedin.com/in/pola5h" target="_blank" rel="noopener noreferrer">LinkedIn</a>
            </div>
        </div>
    </div>
</body>
</html>
